# JAMEY 3.0 - Project Rules

## TECH STACK
- Rust, Tokio, Axum, SQLx
- AI: Conscience Engine, 5-Layer Memory System
- Database: SQLite with SQLx
- Real-time: MQTT async client

## ARCHITECTURE PATTERNS
- Use async/await throughout Rust code
- Axum web framework with Tower middleware
- 5-layer memory system: short_term, long_term, working, episodic, semantic
- Moral rule-based conscience engine with weighted scoring

## CODE STANDARDS
- Follow Rust 2021 edition conventions
- Use `anyhow` or `thiserror` for error handling
- Prefer functional patterns where appropriate
- Use `tracing` for logging instead of `println!`
- Structure modules with clear separation: conscience, memory, agents

## MEMORY SYSTEM RULES
- Five distinct memory layers with Tantivy indexing
- Short-term: Immediate actions and evaluations
- Long-term: Persistent moral learnings
- Working: Current context and reasoning
- Episodic: Event sequences and experiences
- Semantic: Conceptual knowledge and rules

## CONSCIENCE ENGINE
- Moral rules have weights (f32) and descriptions
- Evaluation scans action text for rule matches
- Default rules: "no-harm" (weight: 10.0), "truth" (weight: 8.0)
- Rules stored in thread-safe DashMap

## API ENDPOINTS
- GET / : Health check
- POST /evaluate : Evaluate action morality (returns f32 score)

## PROJECT STRUCTURE
- Rust binary in src/
- Data: SQLite DB and memory indices in data/
- Shared types and logic in src/lib.rs
